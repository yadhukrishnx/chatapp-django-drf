{% extends "base.html" %}
{% load static %}
{% load bootstrap_icons %}
{% block title %} Login {% endblock %}
{% block nav_button %}


<!-- Avatar -->
<a class="nav-link avatar-container" id="avatarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="text-white font-weight-bold mr-3 p-3">{{ user.username }}</span>
    <img src="{% static 'home/images/avatar.png' %}" alt="User Avatar" class="rounded-circle border border-2 border-white" style="width: 40px; height: 40px; object-fit: cover;">
</a>

<!-- Dropdown menu -->
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="avatarDropdown">
    <li><a class="dropdown-item" href="#">Profile</a></li>
    <li><a class="dropdown-item" href="{% url 'logout' %}">Log Out</a></li>
</ul>

{% endblock %}

{% block content %}

<script>
    // Function to copy the token to clipboard
    function copyToken() {
        var token = document.getElementById("token"); // Get the token element
        token.select(); // Select the token
        token.setSelectionRange(0, 99999); // For mobile devices
        document.execCommand("copy"); // Copy the token to the clipboard
        alert("Token copied: " + token.value); // Show alert
    }
</script>


<div class="container-fluid mt-3">
    <!-- Row to align content -->
    <div class="row">
        <!-- Column for Token Section (Left) -->
        <div class="col-6 d-flex align-items-center">
            <!-- Token Label and Input -->
            <label for="token" class="me-2 mb-0">Your Token:</label>
            <input type="text" id="token" value="{{ token }}" class="form-control w-auto" readonly>

            <!-- Copy Button -->
            <button onclick="copyToken()" class="btn btn-info ms-2">Copy</button>
        </div>

        <!-- Column for Coin Balance Section (Right) -->
        <div class="col-6 text-end d-flex align-items-center justify-content-end">
            <!-- Coin Icon and Coin Balance -->
             <span class="ms-2">Coin Balance : </span>
             <span class="ms-2 p-2">{{ user.tokens }} </span> <!-- You can dynamically replace this value -->
            {% bs_icon 'coin' color='blue'  %}
            
        </div>
    </div>
</div>



<div class="d-flex justify-content-center align-items-center mt-5" style="height: 80vh;">
    <div class="card" style="width: 40rem; height: 100%; display: flex; flex-direction: column;">
        <div class="card-body d-flex flex-column">
            <div class="d-flex justify-content-center align-items-center mb-4 ">
                <h6 class="text-center mb-0 mr-3 p-1">Chat</h6>
                {% bs_icon 'chat-dots' %}
            </div>
            
            
            <div class="position-relative flex-grow-1 overflow-auto">
                <div class="chat-messages p-4" style="max-height: 400px; overflow-y: auto;" id="chat-history">
                    <!-- Chat -->

                    <!-- User Message -->
                    <!-- <div class="chat-message-right pb-4">
                        <div class="d-flex justify-content-end align-items-start">
                            <div class="flex-shrink-1 bg-light rounded py-2 px-3 mr-3">
                                <div class="font-weight-bold mb-1">You</div>
                                Lorem ipsum dolor sit amet.
                            </div>
                            <div>
                                <img src="{% static 'home/images/avatar.png' %}" class="rounded-circle mr-1" alt="User Avatar" width="35" height="35">
                                <div class="text-muted small text-nowrap mt-2">2:33 am</div>
                            </div>
                        </div>
                    </div> -->
                    
                    <!-- Bot Reply  -->
                    <!-- <div class="chat-message-left pb-4">
                        <div class="d-flex">
                            <div>
                                <img src="{% static 'home/images/bot_avatar.jpg' %}" class="rounded-circle mr-1" alt="AI Avatar" width="35" height="35">
                                <div class="text-muted small text-nowrap mt-2">2:34 am</div>
                            </div>
                            <div class="flex-shrink-1 bg-light rounded py-2 px-3 ml-3">
                                <div class="font-weight-bold mb-1">Sharon Lessman</div>
                                Sit meis deleniti eu.
                            </div>
                        </div>
                    </div> -->
                    
                    
                    


                    
                </div>
            </div>

            <div class="d-flex justify-content-center align-items-center  ">
                <small>This may not be accurate. Please proceed with caution.</small>
                {% bs_icon 'exclamation-triangle'  %}
            </div>
            
            
            <!-- Input Section -->
            <div class="flex-grow-0 py-3 px-4 border-top">
                <form id="chat-form">
                    <div class="input-group">
                        <input type="text" id="user-message" class="form-control" placeholder="Type your message" required>
                        <button type="submit" class="btn btn-primary">
                            {% bs_icon 'send-fill' %}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'chat/chat.js' %}"></script>
{% endblock %}
